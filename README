Adminsite
=========
This is a basic Circle Admin Backend interface.

This support a series of named spaced (yoursite.com/admin/) backend
with these features:

- login for admin (with openid)
- simple cms for pages (handle html xml files)
- simple cms for file assets (handles images and swf file)


Install
=======
Add this in your environment.rb:
config.gem 'adminsite'

Add this line to your Rakefile:
require 'adminsite/tasks'

Add these routes into routes.rb:
map.root    :controller => 'contents', :action => 'show', :page_url => 'index'
map.connect ':page_url', :controller => 'contents', :action => 'show'
map.connect ':page_url.:format', :controller => 'contents', :action => 'show'
map.connect ':page_url/:id', :controller => 'contents', :action => 'show'


Setup
=======
To start do a:

rake adminsite:sync
rake db:migrate
rake adminsite:setup

This creates a standard admin with these credentials:
login    -> admin
password -> password


How does it work.
================
1) Remove index.html from public
2) Start your server
3) Log in at http://localhost:3000/admin with admin / password
4) Create a new page with:
   - name: index page
   - url:  index.html
   - body: "hello world"
5) open http://localhost:3000/


Mosso Cloud Files
=================

If you want to use mosso cloud files support you should add a config/mosso_cloudfiles.yaml that should look like this

development:
  username: circlerd
  api_key: SECRET_API 
test:
  username: katherine
  api_key: test
production:
  username: circlerd
  api_key: SECRET_API 

SECRET_API is defined into the mosso control panel and in all the project we have with mosso suport

Add this into you production.rb
PAPERCLIP_CONTAINER = "my_project_container"
Be sure that "my_project_container" exists for your account

Protected pages
===============
If you want protected pages you need to add in ApplicationController a require_user method:

This method should return false if no user is logged in or true if there is a user logged in

ex. using authlogic:

def require_user
  unless current_user
    flash[:notice] = "You must be logged in to access this page"
    redirect_to "/"
    return false
  end
  return true
end

def current_user
  # Place here you authentication code
end

