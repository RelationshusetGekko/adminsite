.search_form
  - show_search_form = @ransack_params.present?
  %a#show{onClick: 'showSearchForm();', style: "#{'display:none' if show_search_form}"  } Show Filters
  %a#hide{onClick: 'hideSearchForm();', style: "#{'display:none' unless show_search_form}" } Hide Filters
  = search_form_for(@q, :url => admin_resource_path(nil), method: :get, html: { style: "#{'display:none' unless show_search_form}"} ) do |f|
    %div{id: "#{controller_name}-search"}
      = hidden_field_tag :admin_menu, params[:admin_menu]
      %ul
        - resource_admin_config.attributes_search.each do |search_attr|
          %li
            - if (column = column_of_attr(search_attr)).present?
              - p_value = (params[:p] || {})[search_attr]
              - input_type = input_type_of_column(column)
              - predicates = ransack_predicate_input_type(input_type)
              - field_value = (params[:q] || {})["#{search_attr}_#{p_value}"]
              = f.label("#{search_attr}")
              - html_options = {name: "p[#{search_attr}]" , onchange: "document.getElementById('q_#{search_attr}').name = 'q[#{search_attr}_' + this.value + ']' ; "}
              - html_options.merge!(:style => 'display: none;') if predicates.count == 1
              = f.predicate_select({:only => predicates, :selected => p_value, :compounds => false}, html_options )
              - case input_type
              - when :boolean
                = select_tag("q[#{search_attr}_eq]", options_for_select([ "true", "false" ], field_value), include_blank: true)
              - else
                = f.search_field("#{search_attr}", value: field_value )
              :javascript
                predicate_obj = document.getElementsByName('p[#{search_attr}]')[0];
                predicate_obj.onchange();


      .actions
        = f.submit "Search"
        = link_to "Reset" , admin_resource_path(nil)


